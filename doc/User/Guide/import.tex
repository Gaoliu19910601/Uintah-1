% -*-latex-*-
%
%  The contents of this file are subject to the University of Utah Public
%  License (the "License"); you may not use this file except in compliance
%  with the License.
%
%  Software distributed under the License is distributed on an "AS IS"
%  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
%  License for the specific language governing rights and limitations under
%  the License.
%
%  The Original Source Code is SCIRun, released March 12, 2001.
%
%  The Original Source Code was developed by the University of Utah.
%  Portions created by UNIVERSITY are Copyright (C) 2001, 1994
%  University of Utah. All Rights Reserved.
%

\section{Importing Data into \sr{}}
\label{sec:import} 
\index{importing}

\sr{} cannot import "foreign" data. Programs called converters must perform this translation. Converters create a \sr{} data object, read foreign data, and copy data to the object. then the \sr{} data object writes itself to a file.

\subsection{CVRTI Converters}

The Cardiovascular Research and Training Institute (CVRTI) has developed a
number of scalar and vector data and geometry file formats that require
converters for \sr{}.  The result is a set of stand-alone programs that read
existing CVRTI files and generate \sr{} data files.

The programs and their parameters are as follows (definitions for different parameter and file types are at the end of the list):
%
\begin{description}
  \descitem{CVRTItoTriSurfGrad} Converts nodes, triangle connectivities, and
        vector (grad) files into a field with associated vector attribute:\\
        \begin{verbatim}
        CVRTItoTriSurfGrad pts fac grad [channels] fieldout
        \end{verbatim}
  \descitem{CVRTItoTriSurfPot} Converts nodes, triangle connectivities, and
        scalar (pot) data files into a field with associated scalar
        attributes. 
        \begin{verbatim}
        CVRTItoTriSurfPot pts fac pot [channels] fieldout
        \end{verbatim}
  \descitem{CVRTItoTetVolGrad} Converts nodes, tetrahedral connectivities, and
        vector (grad) files into a field with associated vector
        attributes:\\
        \begin{verbatim}
        CVRTItoTetVolGrad pts tetras grad [channels] fieldout
        \end{verbatim}
  \descitem{CVRTItoTetVolPot} Converts nodes, tetrahedral connectivities, and
        scalar (pot) files into a field with associated scalar attributes:\\
        \begin{verbatim}
        CVRTItoTetVolPot pts tetras pot [channels] fieldout
        \end{verbatim}
\end{description}

\paragraph{Definitions}

\begin{center}
\begin{tabular}{|c|p{4in}|} \hline
\multicolumn{1}{|c|}{Argument} &
\multicolumn{1}{|c|}{Purpose} \\ \hline
\multicolumn{2}{|l|}{Geometry} \\ \hline
pts & CVRTI points file; ASCII file with one x,y,z triplet per line.*\\
fac & CVRTI triangle connectivity (facet) file; ASCII file with one
    triangle defined per line.  Each value points to a node number in the
    associated .pts file, with 1 (not 0) as the first node number.*  \\
tetras & CVRTI tetrahedra file; ASCII file with the nodes from one
    tetrahedron on each line, pointing to the nodes in the associated .pts
    file.  Pointers begin with 1 (not 0).*\\ \hline
\multicolumn{2}{|l|}{Data} \\ \hline
grad & CVRTI vector file; ASCII file with two x,y,z triplets per line;
    first triplet is origin of the vector and second is the endpoint.*\\
pot & CVRTI scalar (potentials) data file; ASCII file,  each line contains
    one scalar value.  Without .channels file, all programs assume a
    one-to-one mapping of scalar value to the  nodes in the associated .pts
    file.*\\ \hline
\multicolumn{2}{|l|}{Channel Mapping} \\ \hline
channels & CVRTI data channel mapping file; ASCII file that begins with the
    line ``N channels'', where N is the number of channels in the file.
    Subsequent lines contain two values, the first refers to a node number in
    the geometry and the second points to the associated channel of any scalar
    or vector data files.  Thus a .channels file must have an entry for each
    node of the associated .pts file but the associated .pot file can have more
    (or even fewer) entries.\\ \hline
\multicolumn{2}{|l|}{Field File} \\ \hline
field & SCIRun fields file that contains both the geometry and associated
    scalar or vector data as attributes. \\ \hline
& *\textbf{Note}: to find the length of all CVRTI ASCII geometry,
scalar, and vector files, count the number of lines in the file. \\
\hline
\end{tabular}
\end{center}

\paragraph{Location of converter programs:}
All converter programs should be available in the subdirectory of the
\sr{} distribution called \directory{src/StandAlone/convert}.  If they are
not available, contact your local \sr{} installer.
