<BASE HREF="http://www.sci.utah.edu/scirun_docs/doc/coding_standard.html">
<HTML>
<HEAD>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
  <TITLE>Coding Standards C++ Specification</TITLE>
  <LINK REL="STYLESHEET" HREF="http://www.sci.utah.edu/scirun_docs/doc/doc_styles.css" TYPE="text/css">
</HEAD>
<BODY>

<p class="title">SCIRun C++ Coding Standards</p>

<p class="head">Table of contents</p>
<p>
The following list documents the SCIRun Coding Standards.  Any questions
or requested modifications should be sent to scirun-exec@cs.utah.edu.
</p>

<ol class="toc">
<li><a href="#required">SCIRun Required Standards</a></li>
<li><a href="#sci-advice">SCIRun Advice</a></li>
</ol>

<p class="head"><a name="required">SCIRun Required Standards</a></p>
<ol>
  <li>
      Include files in C++ always have the file name extension `.h'. 
  </li>
  <li>
      Implementation files in C++ always have the file name extension `.cc'. 
  </li>
  <li>
      All files must include appropriate license information. 
  </li>
  <li>
      All code and comments are to be written in English. 
  </li>
  <li>
      Every include file must contain a mechanism that prevents multiple
      inclusions of the file.  

      The #if guard should be of the form :
      &quot;Libraryname_Filename_h&quot;.  For example:
      <pre class="example">
      #ifndef Geometry_BBox_h
      #define Geometry_BBox_h

      (code...)

      #endif // Geometry_BBox_h
      </pre>
  </li>
  <li>
      Use forward declarations wherever possible as opposed to including
      full definitions.

      <pre class="example">
      // use a forward declarator:
      class PointToMe;

      // for Arguments 
      void my_function(PointToMe &p, PointToMe *ptm);

      // and for Data
      PointToMe *m;
    
      </pre>
  </li>
  <li>
      The names of variables and functions are to begin with a lowercase
      letter, with underscore word separators.  Names of constants should
      be in all CAPITALS, with underscore word separation.

      <pre class="example">
      static int CONSTANT_INT_FIVE = 5;
      void my_function_name();
      int my_local_variable_name = 0;
      </pre>
  </li>
  <li>
      The names of class member variables are to end with &quot;_&quot;.

      <pre class="example">
      struct SomeObject {
        int count_;
      };
      </pre>
  </li>
  <li>
      The names of abstract data types (eg: Classes), and structs are to
      begin with an uppercase letter, and each new word in the name should
      also be capitolized.
      <pre class="example">
      MyNewClassName
      </pre>
  </li>
  <li>
      typedefs, and enumerated types are to end with an _t and _e respectively.
  </li>
  <li>
      Do not use identifiers which begin with one or two underscores (`_'
      or `__').
  </li>
  <li>
      Never use the $Id or $Log cvs directives.  This confuses merging
      between branches.
  </li>
  <li>
      Use the c++ mode in GNU Emacs , and the sci-c++-style.el to format code. 
  </li>
  <li>
      A member function that does not change the state of an object (its
      instance variables) is to be declared &quot;const&quot;.
  </li>
  <li>
      A class which uses `new' to allocate instances managed by the
      class, must define a copy constructor, and an assignment operator.
  </li>
  <li>
      All classes which are used as base classes and which have virtual
      functions, must define a virtual destructor.
  </li>
  <li>
      Do not use the preprocessor directive #define to obtain more
      efficient code; instead, use inline functions.
  </li>
  <li>
      Constants are to be defined using const or enum; never using #define. 
  </li>
  <li>
      Avoid the use of numeric values in code; use symbolic values
      instead.  [This applies to numeric values that are repeated within the
      code(s) but represent the same value.  Eg: MAX_ARRAY_SIZE = 1024.]
  </li>
  <li>
      Do not compare a pointer to NULL or assign NULL to a pointer; use 0
      instead.
  </li>
  <li>
      Avoid explicit type conversions (casts) but rather use dynamic_cast ,
      if you must cast, comment why.
  </li>
  <li>
      Never convert a const to a non-const.  [Use &quot;mutable&quot;
      if necesary. However, be aware of the thread safety problems this
      causes.]
  </li>
  <li>
      Never use goto. 
  </li>
  <li>
      Do not use malloc, realloc or free. 
  </li>
  <li>
      Always use delete[] for deallocating arrays.
  </li>
  <li>
      Use exception handling to trap errors.  [Exceptions should only be
      used for trapping truly exceptional events.]  Our exception model
      includes two levels of exceptions.  The top level of exceptions are
      defined in Classlib/Exceptions.h and are thrown when a Class specific
      exception is not appropriate.  The bottom level of exceptions are
      Class specific, defined in the Class that throws them, and are
      subclassed off of the top level exceptions.  These Class specific
      exceptions are exceptions that can be caught and handled from the
      calling function (1 level above the class.)  However, if the calling
      function chooses not to (or cannot) handle the Class specific
      exception, the exception will propagate to the next level at which
      point it can be trapped and handled in the form of a top level
      exception.  (And example of a Class specific exception would be a
      &q
  </li>
</ol>

<p class="head"><a name="sci-advice">SCIRun Advice</a></p>
<ol>
  <li>
      Optimize code only if you know that you have a performance problem.
      Think twice before you begin.
  </li>
  <li>
      Always force your compiler to compile with the maximum warning setting,
      and before you check in code, fix all warnings.
  </li>
  <li>
      Place machine-dependent code in a special file so that it may be
      easily located when porting code from one machine to another.
  </li>
  <li>
      An include file for a class should have a file name of the form
      <class name> + extension. Use uppercase and lowercase letters in the
      same way as in the source code.
  </li>
  <li>
      Encapsulate global variables and constants, enumerated types, and
      typedefs in a class.
  </li>
  <li>
      Never use more than 80 columns per line.
  </li>
  <li>
      Functions in general should not be more than 25 lines long. If you
      find this situation, break the function into several smaller functions.
  </li>
  <li>
      When two operators are opposites (such as == and !=), it is
      appropriate to define both.
  </li>
  <li>
      If a function stores a pointer to an object which is accessed via
      an argument, let the argument have the type pointer. Use reference
      arguments in other cases.
  </li>
  <li>
      Use constant references (const &amp;) instead of call-by-value, unless
      using a pre-defined data type or a pointer.
  </li>
  <li>
      When overloading functions, all variations should have the same
      semantics (be used for the same purpose).
  </li>
  <li>
      Minimize the number of temporary objects that are created as return
      values from functions or as arguments to functions.
  </li>
  <li>
      Use a typedef to simplify program syntax when declaring function
      pointers, or templated types.
  </li>
  <li>
      Use parentheses to clarify the order of evaluation for operators in
      expressions.
  </li>
  <li>
      Avoid global data if at all possible. 
  </li>
  <li>
      Never include /usr/include/*.h (eg: iostream.h) in any .h file.
      This causes a huge amount of code to be recursively included and
      needlessly compiled.  (Use forward declaration.)
  </li>
  <li>
      Group local includes together, then group system includes together.  
  </li>
  <li>
      Use &quot;cout&quot; instead of &quot;printf&quot;.
  </li>

  <li>
      Do not assume that an int and a long have the same size. 
  </li>
  <li>
      Do not assume that a char is signed or unsigned. 
  </li>
  <li>
      Always use plain char if 8-bit ASCII is used.  Otherwise, use
      signed char or unsigned char.
  </li>
  <li>
      Do not assume that pointers and integers have the same size. 
  </li>
  <li>
      Do not assume that longs, floats, doubles or long doubles may begin
      at arbitrary addresses.
  </li>
  <li>
      Do not depend on underflow or overflow functioning in any special
      way.
  </li>
  <li>
      Do not assume that the operands in an expression are evaluated in a
      definite order. Use parenthesis to enforce an order.
  </li>
  <li>
      Do not assume that you know how the invocation mechanism for a
      function is implemented.
  </li>
  <li>
      Do not assume that an object is initialized in any special order in
      constructors.
  </li>
  <li>
      Do not assume that static objects are initialized in any special
      order.
  </li>
  <li>
      Do not write code which is dependent on the lifetime of a temporary
      object.
  </li>
  <li>
      Avoid using shift operations instead of arithmetic operations. 
  </li>
  <li>
      Avoid pointer arithmetic. 
  </li>
</ol>

</BODY>
</HTML>

