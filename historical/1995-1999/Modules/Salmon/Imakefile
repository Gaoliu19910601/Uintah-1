
#include <config/sci.cf>

SUBDIRS = mpeg
SCISubdirs($(SUBDIRS))

#ifdef SCI_MACHINE_Linux
TEMPLATE_OBJS = templates.o
TEMPLATE_SRCS = templates.cc
#endif

#if defined(SCI_MACHINE_Solaris)
XLIBDIR = -L/usr/openwin/lib
XINCLUDE = -I/usr/openwin/include
#endif

#if defined(SCI_MACHINE_Linux)
XLIBDIR = -L/usr/X11R6/lib
#endif

#ifdef SCI_OPENGL
OPENGLOBJS = OpenGL.o
OPENGLSRCS = OpenGL.cc

#ifdef SCI_MESA
OPENGLINCS = $(XINCLUDE) -I$(TOP)/Mesa/include
OPENGLLIBS = $(XLIBDIR) -L$(TOP)/Mesa/lib -lMesaGLU -lMesaGL -lXext -lX11
#else
OPENGLINCS = $(XINCLUDE)
OPENGLLIBS = $(XLIBDIR) -lGLU -lGL -lXext -lX11
#endif
#else
OPENGLOBJS =
OPENGLSRCS = 
#endif

IMGLIBOBJS = open.o close.o row.o name.o rdwr.o rle.o
#ifdef __sgi
LOCALCFLAGS = -woff 835
#endif

OBJS = Salmon.o  Renderer.o  Roe.o  MpegEncoder.o  \
	SalmonGeom.o Ball.o BallAux.o BallMath.o Tex.o \
	$(OPENGLOBJS) $(IMGLIBOBJS) $(TEMPLATE_OBJS)
SRCS = Salmon.cc Renderer.cc Roe.cc MpegEncoder.cc \
	SalmonGeom.cc Ball.cc BallAux.cc BallMath.cc Tex.cc \
	$(OPENGLSRCS) $(TEMPLATE_SRCS)

LOCALINCLUDES = $(OPENGLINCS) $(XINCLUDE)
SO_LIBS = 
SO_LDFLAGS = -L$(TOP)/lib -lDatatypes -lDataflow -lDevices -lGeom \
	-lGeometry -lComm -lTCL -lscitk -lClasslib -lMultitask \
	-lMalloc $(OPENGLLIBS) -ltk SCI_CCLibs -lmpeg -lm 

LIBNAME = Salmon

SCIDependTarget($(SRCS))
SCIObjLibraryTarget($(LIBNAME),$(OBJS),$(SO_LIBS),$(SO_LDFLAGS))
