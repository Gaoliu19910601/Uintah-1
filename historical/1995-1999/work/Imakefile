
#include <config/sci.cf>

#ifdef SCI_COMPILER_GNU
TMPL_DIR = gnupt
TMPL_LIB = gnupt/libgnupt.o
#else
TMPL_DIR =
TMPL_LIB =
#endif

SUBDIRS = Classlib Comm Constraints \
	Dataflow Datatypes Devices Geom Geometry \
	Malloc Math Modules Multitask TCL Widgets tcl $(TMPL_DIR) \
	convert


SCISubdirs($(SUBDIRS))

#ifdef SCI_COMPILER_CFRONT
TMPLHACK_SRCS = tmpl_hack.cc
TMPLHACK_OBJS = tmpl_hack.o
#else
TMPLHACK_SRCS =
TMPLHACK_OBJS =
#endif


SR_TARGET = sr
SR_SRCS = scirun.cc $(TMPLHACK_SRCS)
SR_OBJS = scirun.o  $(TMPLHACK_OBJS)
SR_LIBS = \
	Classlib/Persistent.o \
	Geometry/BSphere.o \
	Geometry/Point.o \
	Geometry/Transform.o \
	Geometry/BBox.o \
	Geometry/Plane.o \
	Math/TrigTable.o \
	Multitask/ITC.o \
	Classlib/TrivialAllocator.o \
	Constraints/libConstraints.a \
	TCL/libTCL.a \
	Dataflow/libDataflow.a \
	TCL/libTCL.a \
	Devices/libDevices.a \
	Comm/libComm.a \
	Geometry/libGeometry.a \
	Math/libMath.a \
	Classlib/libClasslib.a \
	Multitask/libMultitask.a \
	Malloc/libMalloc.a \
	tcl/sci/libscitk.a \
	tcl/itcl/src/libitcl.a \
	tcl/tk/libtk.a \
	tcl/tcl/libtcl.a \
	$(TMPL_LIB)

SR_LDFLAGS = SCI_LAUDIO SCI_LM SCI_LTHREAD SCI_LGL SCI_LX11 -lXext
SCIProgramTarget($(SR_TARGET), $(SR_OBJS), $(SR_LIBS), $(SR_LDFLAGS))

SRCS = $(SR_SRCS)
SCIDependTarget($(SRCS))

World:
	make Makefile
	make Makefiles
	make depend
	make

update:
	cvs update -d
	make World

clean::
	rm -rf templates
