SRCTOP  = @top_srcdir@
SRCDIR  = @srcdir@
OBJTOP  = ..

TCL_LIB_DIR   = @TCL_LIB_DIR@
TCL_LIB_FLAG  = @TCL_LIB_FLAG@
TK_LIB_DIR    = @TK_LIB_DIR@

TK_LIB_FLAG   = @TK_LIB_FLAG@
ITCL_LIB_DIR  = @ITCL_LIB_DIR@
ITCL_LIB_FLAG = @ITCL_LIB_FLAG@
ITCL_WIDGETS  = @ITCL_WIDGETS@

LDRUN_PREFIX  = @LDRUN_PREFIX@

OBJTOP_ABS    = $(shell cd $(OBJTOP) ; pwd)
SRCTOP_ABS    = $(shell cd $(SRCTOP) ; pwd)

ifeq (@BUILD_PARALLEL@,yes)
COMPONENTLIBS = $(LDRUN_PREFIX)$(OBJTOP_ABS)/Component \
			-L$(OBJTOP)/Component -lComponent
GLOBUS_LIB_DIR = @GLOBUS_LIB@
GLOBUSLIBS = -L$(GLOBUS_LIB_DIR) -lglobus_nexus -lglobus_io
endif

SRCS      = main.cc
CFLAGS   := $(CFLAGS) -DPSECORETCL=\"$(SRCTOP_ABS)/PSECore/GUI\" \
                      -DSCICORETCL=\"$(SRCTOP_ABS)/SCICore/GUI\" \
                      -DITCL_WIDGETS=\"$(ITCL_WIDGETS)\" \
                      -DDEFAULT_PACKAGE_PATH=\"@PACKAGE_PATH@\"
INCLUDES  = -I$(SRCTOP) -I$(OBJTOP)
            
PROGRAM   = @EXENAME@
LIBRARIES = $(LDRUN_PREFIX)$(TCL_LIB_DIR) \
            $(LDRUN_PREFIX)$(TK_LIB_DIR) \
            $(LDRUN_PREFIX)$(ITCL_LIB_DIR) \
            $(LDRUN_PREFIX)$(OBJTOP_ABS)/PSECore \
            $(LDRUN_PREFIX)$(OBJTOP_ABS)/SCICore \
            -L$(OBJTOP)/PSECore -lPSECore \
	    $(COMPONENTLIBS) \
            -L$(OBJTOP)/SCICore -lSCICore \
	    $(GLOBUSLIBS) \
            -L$(OBJTOP)/ThirdParty \
            -L$(ITCL_LIB_DIR) $(ITCL_LIB_FLAG) \
            -L$(TK_LIB_DIR) $(TK_LIB_FLAG) \
            -L$(TCL_LIB_DIR) $(TCL_LIB_FLAG)


include $(SRCTOP)/scripts/program.mk

../@EXENAME@:: @EXENAME@
	cp @EXENAME@ ..

all:: ../@EXENAME@

_distcleanHere::
	rm -f ../@EXENAME@
