
#include <config/sci.cf>

#ifdef SCI_COMPILER_GNU
TMPL_DIR = gnupt
TMPL_LIB = gnupt/libgnupt.o
#else
TMPL_DIR =
TMPL_LIB =
#endif

SUBDIRS = Classlib Comm Constraints \
	Dataflow Datatypes Devices Geom Geometry \
	Malloc Math Modules Multitask TCL Widgets tcl $(TMPL_DIR)

SCISubdirs($(SUBDIRS))

#ifdef SCI_COMPILER_CFRONT
TMPLHACK_SRCS = tmpl_hack.cc
TMPLHACK_OBJS = tmpl_hack.o
#else
TMPLHACK_SRCS =
TMPLHACK_OBJS =
#endif


SR_TARGET = sr
SR_SRCS = scirun.cc $(TMPLHACK_SRCS)
SR_OBJS = scirun.o  $(TMPLHACK_OBJS)
SR_LIBS = \
	Modules/libModules.o \
	Widgets/libWidgets.a \
	Constraints/libConstraints.a \
	TCL/libTCL.a \
	Dataflow/libDataflow.a \
	Datatypes/libDatatypes.o \
	TCL/libTCL.a \
	Geom/libGeom.a \
	Devices/libDevices.a \
	Comm/libComm.a \
	Geometry/libGeometry.a \
	Math/libMath.a \
	Classlib/libClasslib.a \
	Multitask/libMultitask.a \
	Malloc/libMalloc.a \
	tcl/sci/libscitk.a \
	tcl/tk3.6/libtk.a \
	tcl/tcl7.3/libtcl.a \
	$(TMPL_LIB)

SR_LDFLAGS = SCI_LAUDIO SCI_LM SCI_LTHREAD SCI_LGL SCI_LX11
SCIProgramTarget($(SR_TARGET), $(SR_OBJS), $(SR_LIBS), $(SR_LDFLAGS))

SEG_TARGET = SegToCS
SEG_SRCS = SegToCS.cc
SEG_OBJS = SegToCS.o
SEG_LIBS = \
	Datatypes/libDatatypes.a \
	Geometry/libGeometry.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Malloc/libMalloc.a

SEG_LDFLAGS = SCI_LM
SCIProgramTarget2($(SEG_TARGET), $(SEG_OBJS), $(SEG_LIBS), $(SEG_LDFLAGS))

JAS_TARGET = SurfToJAS
JAS_SRCS = SurfToJAS.cc
JAS_OBJS = SurfToJAS.o
JAS_LIBS = \
	Datatypes/TriSurface.o \
	Datatypes/libDatatypes.a \
	Geometry/libGeometry.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Malloc/libMalloc.a

JAS_LDFLAGS = SCI_LM
SCIProgramTarget2($(JAS_TARGET), $(JAS_OBJS), $(JAS_LIBS), $(JAS_LDFLAGS))

SJAS_TARGET = JAStoSurf
SJAS_SRCS = JAStoSurf.cc
SJAS_OBJS = JAStoSurf.o
SJAS_LIBS = \
	Datatypes/TriSurface.o \
	Datatypes/libDatatypes.a \
	Geometry/libGeometry.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Malloc/libMalloc.a

SJAS_LDFLAGS = SCI_LM
SCIProgramTarget2($(SJAS_TARGET), $(SJAS_OBJS), $(SJAS_LIBS), $(SJAS_LDFLAGS))

IVES_TARGET = ScFldToIves
IVES_SRCS = ScFldToIves.cc
IVES_OBJS = ScFldToIves.o
IVES_LIBS = \
	Datatypes/ScalarField.o \
	Datatypes/ScalarFieldRG.o \
	Datatypes/libDatatypes.a \
	Geometry/libGeometry.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Malloc/libMalloc.a

IVES_LDFLAGS = SCI_LM
SCIProgramTarget2($(IVES_TARGET), $(IVES_OBJS), $(IVES_LIBS), $(IVES_LDFLAGS))

VP_TARGET = VPtoTriSurf
VP_SRCS = VPtoTriSurf.cc
VP_OBJS = VPtoTriSurf.o
VP_LIBS = \
	Datatypes/libDatatypes.a \
	Geometry/libGeometry.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Math/libMath.a \
	Malloc/libMalloc.a

VP_LDFLAGS = SCI_LM
SCIProgramTarget2($(VP_TARGET), $(VP_OBJS), $(VP_LIBS), $(VP_LDFLAGS))

SC_TARGET = GenScalp
SC_SRCS = GenScalp.cc
SC_OBJS = GenScalp.o
SC_LIBS = \
	Classlib/libClasslib.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Math/libMath.a

SC_LDFLAGS = SCI_LM
SCIProgramTarget2($(SC_TARGET), $(SC_OBJS), $(SC_LIBS), $(SC_LDFLAGS))

MESH_TARGET = ConvMesh
MESH_SRCS = ConvMesh.cc
MESH_OBJS = ConvMesh.o
MESH_LIBS = \
	Datatypes/libDatatypes.a \
	Classlib/libClasslib.a \
	Geometry/libGeometry.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Math/libMath.a \
	Malloc/libMalloc.a

MESH_LDFLAGS = SCI_LM
SCIProgramTarget2($(MESH_TARGET), $(MESH_OBJS), $(MESH_LIBS), $(MESH_LDFLAGS))

JASUG_TARGET = JAStoUG
JASUG_SRCS = JAStoUG.cc
JASUG_OBJS = JAStoUG.o
JASUG_LIBS = \
	Datatypes/libDatatypes.a \
	Classlib/libClasslib.a \
	Geometry/libGeometry.a \
	Multitask/libMultitask.a \
	Classlib/libClasslib.a \
	Math/libMath.a \
	Malloc/libMalloc.a

JASUG_LDFLAGS = SCI_LM
SCIProgramTarget2($(JASUG_TARGET), $(JASUG_OBJS), $(JASUG_LIBS), $(JASUG_LDFLAGS))

SRCS = $(SR_SRCS) $(SEG_SRCS) $(JAS_SRCS) $(SC_SRCS) $(MESH_SRCS) $(VP_SRCS) \
	$(IVES_SRCS) $(JASUG_SRCS) $(SJAS_SRCS)
SCIDependTarget($(SRCS))

World:
	make Makefile
	make Makefiles
	make depend
	make

update:
	cvs update -d
	make World

clean::
	rm -rf templates
